(()=>{var r={};r.id=384,r.ids=[384],r.modules={846:r=>{"use strict";r.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:r=>{"use strict";r.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:r=>{"use strict";r.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:r=>{"use strict";r.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:r=>{"use strict";r.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4710:(r,t,e)=>{"use strict";e.r(t),e.d(t,{patchFetch:()=>l,routeModule:()=>h,serverHooks:()=>y,workAsyncStorage:()=>u,workUnitAsyncStorage:()=>d});var i={};e.r(i),e.d(i,{POST:()=>c});var o=e(2706),n=e(8203),s=e(5994),a=e(9187),p=e(9572);async function c(r){try{let{address:t,items:e}=await r.json(),i=process.env.PRINTIFY_API_KEY||"eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIzN2Q0YmQzMDM1ZmUxMWU5YTgwM2FiN2VlYjNjY2M5NyIsImp0aSI6ImE2YTUxZWU0NGI5NTE3OTFiZjU3ZmY3YWQ5ZTI2ZjE1MDcxMWQwOWRhMmJjYmI4NzRmNDJlY2Q0OWNlMmJmMzcwOThiYWZkNzE1ZjNjMDM2IiwiaWF0IjoxNzQxOTA0MDA3LjMxNTgzOCwibmJmIjoxNzQxOTA0MDA3LjMxNTg0LCJleHAiOjE3NzM0NDAwMDcuMzAyODczLCJzdWIiOiIyMjM0ODY3OCIsInNjb3BlcyI6WyJzaG9wcy5tYW5hZ2UiLCJzaG9wcy5yZWFkIiwiY2F0YWxvZy5yZWFkIiwib3JkZXJzLnJlYWQiLCJvcmRlcnMud3JpdGUiLCJwcm9kdWN0cy5yZWFkIiwicHJvZHVjdHMud3JpdGUiLCJ3ZWJob29rcy5yZWFkIiwid2ViaG9va3Mud3JpdGUiLCJ1cGxvYWRzLnJlYWQiLCJ1cGxvYWRzLndyaXRlIiwicHJpbnRfcHJvdmlkZXJzLnJlYWQiLCJ1c2VyLmluZm8iXX0.AGFSpmTqgbNgL2MR1tMeO5m8MrrBjNr3tK--2bD5urJLxkqnv-ZfiY0UwNluUJRanhEzbmTdApEWUn1rFhs",o=process.env.PRINTIFY_SHOP_ID;o||(o=await (0,p.Cj)(i));let n=await (0,p.y0)(o,t,e,i);return a.NextResponse.json({shippingRates:n})}catch(r){return console.error("Error in API route:",r),a.NextResponse.json({error:"Failed to fetch shipping rates from Printify"},{status:500})}}let h=new o.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/printify/shipping/route",pathname:"/api/printify/shipping",filename:"route",bundlePath:"app/api/printify/shipping/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/shipping/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:u,workUnitAsyncStorage:d,serverHooks:y}=h;function l(){return(0,s.patchFetch)({workAsyncStorage:u,workUnitAsyncStorage:d})}},6487:()=>{},8335:()=>{},9572:(r,t,e)=>{"use strict";e.d(t,{Cj:()=>o,d$:()=>n,fS:()=>a,oo:()=>s,y0:()=>p});let i="https://api.printify.com/v1";async function o(r){try{let t=await fetch(`${i}/shops.json`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!t.ok)throw Error(`Failed to fetch shops: ${t.status}`);let e=await t.json();if(!e.data||0===e.data.length)throw Error("No shops found for this API key");return e.data[0].id}catch(r){throw console.error("Error fetching shop ID from Printify:",r),r}}async function n(r,t){try{let e=await fetch(`${i}/shops/${r}/products.json`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!e.ok)throw Error(`Failed to fetch products: ${e.status}`);return(await e.json()).data}catch(r){throw console.error("Error fetching products from Printify:",r),r}}async function s(r,t,e){try{let o=await fetch(`${i}/shops/${r}/products/${t}.json`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!o.ok)throw Error(`Failed to fetch product: ${o.status}`);return await o.json()}catch(r){throw console.error(`Error fetching product ${t} from Printify:`,r),r}}async function a(r,t,e){try{let o=await fetch(`${i}/shops/${r}/orders.json`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(t)});if(!o.ok)throw Error(`Failed to create order: ${o.status}`);return await o.json()}catch(r){throw console.error("Error creating order with Printify:",r),r}}async function p(r,t,e,o){try{let n=await fetch(`${i}/shops/${r}/shipping_rates.json`,{method:"POST",headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},body:JSON.stringify({address:t,line_items:e})});if(!n.ok)throw Error(`Failed to get shipping rates: ${n.status}`);return await n.json()}catch(r){throw console.error("Error fetching shipping rates from Printify:",r),r}}}};var t=require("../../../../webpack-runtime.js");t.C(r);var e=r=>t(t.s=r),i=t.X(0,[638,452],()=>e(4710));module.exports=i})();