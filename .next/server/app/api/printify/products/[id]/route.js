(()=>{var e={};e.id=928,e.ids=[928],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3172:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>f,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>u});var o={};r.r(o),r.d(o,{GET:()=>d});var i=r(2706),s=r(8203),a=r(5994),n=r(9187),c=r(9572);async function d(e,{params:t}){try{let e=t.id,r=process.env.PRINTIFY_API_KEY;if(!r)return n.NextResponse.json({error:"PRINTIFY_API_KEY environment variable is not set"},{status:401});let o=process.env.PRINTIFY_SHOP_ID;if(!o)try{o=await (0,c.Cj)(r),console.log(`Using shop ID: ${o}`)}catch(e){return console.error("Error getting shop ID:",e),n.NextResponse.json({error:"Failed to get shop ID from Printify",message:"Using mock data as fallback"},{status:200})}let i=await (0,c.oo)(o,e,r),s=(0,c.FX)(i);return n.NextResponse.json({product:s,source:o.startsWith("mock")?"mock":"printify"})}catch(e){return console.error("Error in API route:",e),n.NextResponse.json({error:"Failed to fetch product from Printify"},{status:500})}}let p=new i.AppRouteRouteModule({definition:{kind:s.RouteKind.APP_ROUTE,page:"/api/printify/products/[id]/route",pathname:"/api/printify/products/[id]",filename:"route",bundlePath:"app/api/printify/products/[id]/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/products/[id]/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:u,serverHooks:h}=p;function f(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:u})}},6487:()=>{},8335:()=>{},9572:(e,t,r)=>{"use strict";r.d(t,{Cj:()=>s,FX:()=>c,d$:()=>a,oo:()=>n,y4:()=>i});let o="https://api.printify.com/v1",i="mock-shop-id-12345";async function s(e){try{console.log("Fetching shop ID from Printify API...");let t=await fetch(`${o}/shops.json`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok){let e=await t.text();throw console.error(`API Error (${t.status}): ${e}`),Error(`Failed to fetch shops: ${t.status} - ${e}`)}let r=await t.json();if(!r.data||0===r.data.length)return console.warn("No shops found for this API key. Using mock shop ID for development."),i;return r.data[0].id}catch(e){return console.error("Error fetching shop ID from Printify:",e),console.warn("Using mock shop ID as fallback due to error"),i}}async function a(e,t){try{if(e===i)return console.log("Using mock products data"),d();let r=await fetch(`${o}/shops/${e}/products.json`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!r.ok)throw Error(`Failed to fetch products: ${r.status}`);return(await r.json()).data}catch(e){return console.error("Error fetching products from Printify:",e),d()}}async function n(e,t,r){try{if(e===i){console.log("Using mock product data");let e=d();return e.find(e=>e.id===t)||e[0]}let s=await fetch(`${o}/shops/${e}/products/${t}.json`,{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!s.ok)throw Error(`Failed to fetch product: ${s.status}`);return await s.json()}catch(e){return console.error(`Error fetching product ${t} from Printify:`,e),d()[0]}}function c(e){let t=e.images?.find(e=>e.is_default)||e.images?.[0],r=t?.src||"/placeholder.svg?height=600&width=480",o=e.variants?.[0]?.price||0,i=e.options?.find(e=>"size"===e.name.toLowerCase()),s=i?.values||[],a=e.options?.find(e=>"color"===e.name.toLowerCase()),n=a?.values||[],c="T-Shirts";return e.tags&&(e.tags.some(e=>e.toLowerCase().includes("hoodie"))?c="Hoodies":e.tags.some(e=>e.toLowerCase().includes("sweatshirt"))&&(c="Sweatshirts")),{id:e.id,name:e.title,price:o,description:e.description,images:e.images?.map(e=>e.src)||[r],sizes:s,colors:n,category:c,rating:4.5,reviews:Math.floor(116*Math.random())+5,inStock:!0}}function d(){return[{id:"mock-1",title:"Classic Cotton Tee",description:"Our signature classic tee is made from 100% organic cotton for ultimate comfort and durability.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["1"],position:"front",is_default:!0}],variants:[{id:"1",title:"S / Black",price:29.99,sku:"CT-BLK-S",is_enabled:!0,options:{size:"S",color:"Black"}}],tags:["t-shirt","cotton","classic"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL","2XL"]},{name:"Color",type:"dropdown",values:["Black","White","Navy","Gray","Red"]}]},{id:"mock-2",title:"Vintage Hoodie",description:"A comfortable hoodie with a vintage feel, perfect for cooler days.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["2"],position:"front",is_default:!0}],variants:[{id:"2",title:"M / Navy",price:59.99,sku:"VH-NVY-M",is_enabled:!0,options:{size:"M",color:"Navy"}}],tags:["hoodie","vintage","comfortable"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["Navy","Black","Gray"]}]},{id:"mock-3",title:"Statement Sweatshirt",description:"Make a statement with this comfortable and stylish sweatshirt.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["3"],position:"front",is_default:!0}],variants:[{id:"3",title:"L / Gray",price:49.99,sku:"SS-GRY-L",is_enabled:!0,options:{size:"L",color:"Gray"}}],tags:["sweatshirt","statement","stylish"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["Gray","Black","White"]}]},{id:"mock-4",title:"Graphic Tee",description:"Express yourself with our unique graphic tee designs.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["4"],position:"front",is_default:!0}],variants:[{id:"4",title:"M / White",price:34.99,sku:"GT-WHT-M",is_enabled:!0,options:{size:"M",color:"White"}}],tags:["t-shirt","graphic","unique"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["White","Black","Gray"]}]}]}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,452],()=>r(3172));module.exports=o})();