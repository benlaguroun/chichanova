"use strict";(()=>{var e={};e.id=928,e.ids=[928],e.modules={846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3172:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>d,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>f});var o={};t.r(o),t.d(o,{GET:()=>u});var s=t(2706),n=t(8203),i=t(5994),a=t(9187),p=t(9572),c=t(6373);async function u(e,{params:r}){try{let e=r.id,t=process.env.PRINTIFY_API_KEY;if(!t){console.error("PRINTIFY_API_KEY environment variable is not set");let r=(0,c.S)(),t=r.find(r=>r.id===e)||r[0];return a.NextResponse.json({error:"PRINTIFY_API_KEY environment variable is not set",product:(0,p.FX)(t),source:"mock"},{status:200})}let o=process.env.PRINTIFY_SHOP_ID;if(!o)try{console.log("No PRINTIFY_SHOP_ID found, attempting to fetch from API..."),o=await (0,p.Cj)(t),console.log(`Using shop ID: ${o}`)}catch(o){console.error("Error getting shop ID:",o);let r=(0,c.S)(),t=r.find(r=>r.id===e)||r[0];return a.NextResponse.json({error:"Failed to get shop ID from Printify",message:"Using mock data as fallback",product:(0,p.FX)(t),source:"mock"},{status:200})}console.log(`Fetching product ${e} with shop ID: ${o}`);let s=await (0,p.oo)(o,e,t),n=(0,p.FX)(s);return a.NextResponse.json({product:n,source:o.startsWith("mock")?"mock":"printify"})}catch(o){console.error("Error in API route:",o);let e=(0,c.S)(),t=e.find(e=>e.id===r.id)||e[0];return a.NextResponse.json({error:"Failed to fetch product from Printify",errorDetails:o instanceof Error?o.message:String(o),product:(0,p.FX)(t),source:"error"},{status:200})}}let d=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/printify/products/[id]/route",pathname:"/api/printify/products/[id]",filename:"route",bundlePath:"app/api/printify/products/[id]/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/products/[id]/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:f,serverHooks:m}=d;function g(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:f})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,452,932],()=>t(3172));module.exports=o})();