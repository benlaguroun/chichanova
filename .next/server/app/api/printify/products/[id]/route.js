(()=>{var e={};e.id=928,e.ids=[928],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3172:(e,t,o)=>{"use strict";o.r(t),o.d(t,{patchFetch:()=>f,routeModule:()=>p,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>u});var r={};o.r(r),o.d(r,{GET:()=>d});var s=o(2706),i=o(8203),a=o(5994),n=o(9187),c=o(9572);async function d(e,{params:t}){try{let e=t.id,o=process.env.PRINTIFY_API_KEY;if(!o)return console.error("PRINTIFY_API_KEY environment variable is not set"),n.NextResponse.json({error:"PRINTIFY_API_KEY environment variable is not set",product:null,source:"error"},{status:200});let r=process.env.PRINTIFY_SHOP_ID;if(!r)try{console.log("No PRINTIFY_SHOP_ID found, attempting to fetch from API..."),r=await (0,c.Cj)(o),console.log(`Using shop ID: ${r}`)}catch(e){return console.error("Error getting shop ID:",e),n.NextResponse.json({error:"Failed to get shop ID from Printify",message:"Using mock data as fallback",product:null,source:"mock"},{status:200})}console.log(`Fetching product ${e} with shop ID: ${r}`);let s=await (0,c.oo)(r,e,o),i=(0,c.FX)(s);return n.NextResponse.json({product:i,source:r.startsWith("mock")?"mock":"printify"})}catch(e){return console.error("Error in API route:",e),n.NextResponse.json({error:"Failed to fetch product from Printify",errorDetails:e instanceof Error?e.message:String(e),product:null,source:"error"},{status:200})}}let p=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/printify/products/[id]/route",pathname:"/api/printify/products/[id]",filename:"route",bundlePath:"app/api/printify/products/[id]/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/products/[id]/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:l,workUnitAsyncStorage:u,serverHooks:h}=p;function f(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:u})}},6487:()=>{},8335:()=>{},9572:(e,t,o)=>{"use strict";o.d(t,{Cj:()=>i,FX:()=>c,d$:()=>a,oo:()=>n,y4:()=>s});let r="https://api.printify.com/v1",s="mock-shop-id-12345";async function i(e){try{console.log("Fetching shop ID from Printify API...");let t=await fetch(`${r}/shops.json`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},cache:"no-store"});if(!t.ok){let e=await t.text();throw console.error(`API Error (${t.status}): ${e}`),Error(`Failed to fetch shops: ${t.status} - ${e}`)}let o=await t.json();if(console.log("Printify shops response:",JSON.stringify(o)),!o.data||0===o.data.length)return console.warn("No shops found for this API key. Using mock shop ID for development."),s;return o.data[0].id}catch(e){return console.error("Error fetching shop ID from Printify:",e),console.warn("Using mock shop ID as fallback due to error"),s}}async function a(e,t){try{if(e===s)return console.log("Using mock products data"),d();console.log(`Fetching products from Printify for shop ID: ${e}`);let o=await fetch(`${r}/shops/${e}/products.json`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},cache:"no-store"});if(!o.ok){let e=await o.text();throw console.error(`API Error (${o.status}): ${e}`),Error(`Failed to fetch products: ${o.status} - ${e}`)}let i=await o.json();return console.log(`Received ${i.data?.length||0} products from Printify`),i.data||[]}catch(e){return console.error("Error fetching products from Printify:",e),d()}}async function n(e,t,o){try{if(e===s){console.log("Using mock product data");let e=d();return e.find(e=>e.id===t)||e[0]}console.log(`Fetching product ${t} from Printify for shop ID: ${e}`);let i=await fetch(`${r}/shops/${e}/products/${t}.json`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},cache:"no-store"});if(!i.ok){let e=await i.text();throw console.error(`API Error (${i.status}): ${e}`),Error(`Failed to fetch product: ${i.status} - ${e}`)}let a=await i.json();return console.log(`Received product data from Printify for ID: ${t}`),a}catch(e){return console.error(`Error fetching product ${t} from Printify:`,e),d()[0]}}function c(e){let t=e.images?.find(e=>e.is_default)||e.images?.[0],o=t?.src||"/placeholder.svg?height=600&width=480",r=e.variants?.[0]?.price||0,s=e.options?.find(e=>"size"===e.name.toLowerCase()),i=s?.values||[],a=e.options?.find(e=>"color"===e.name.toLowerCase()),n=a?.values||[],c="T-Shirts";return e.tags&&(e.tags.some(e=>e.toLowerCase().includes("hoodie"))?c="Hoodies":e.tags.some(e=>e.toLowerCase().includes("sweatshirt"))&&(c="Sweatshirts")),{id:e.id,name:e.title,price:r,description:e.description,images:e.images?.map(e=>e.src)||[o],sizes:i,colors:n,category:c,rating:4.5,reviews:Math.floor(116*Math.random())+5,inStock:!0}}function d(){return[{id:"mock-1",title:"Classic Cotton Tee",description:"Our signature classic tee is made from 100% organic cotton for ultimate comfort and durability.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["1"],position:"front",is_default:!0}],variants:[{id:"1",title:"S / Black",price:29.99,sku:"CT-BLK-S",is_enabled:!0,options:{size:"S",color:"Black"}}],tags:["t-shirt","cotton","classic"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL","2XL"]},{name:"Color",type:"dropdown",values:["Black","White","Navy","Gray","Red"]}]},{id:"mock-2",title:"Vintage Hoodie",description:"A comfortable hoodie with a vintage feel, perfect for cooler days.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["2"],position:"front",is_default:!0}],variants:[{id:"2",title:"M / Navy",price:59.99,sku:"VH-NVY-M",is_enabled:!0,options:{size:"M",color:"Navy"}}],tags:["hoodie","vintage","comfortable"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["Navy","Black","Gray"]}]},{id:"mock-3",title:"Statement Sweatshirt",description:"Make a statement with this comfortable and stylish sweatshirt.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["3"],position:"front",is_default:!0}],variants:[{id:"3",title:"L / Gray",price:49.99,sku:"SS-GRY-L",is_enabled:!0,options:{size:"L",color:"Gray"}}],tags:["sweatshirt","statement","stylish"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["Gray","Black","White"]}]},{id:"mock-4",title:"Graphic Tee",description:"Express yourself with our unique graphic tee designs.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["4"],position:"front",is_default:!0}],variants:[{id:"4",title:"M / White",price:34.99,sku:"GT-WHT-M",is_enabled:!0,options:{size:"M",color:"White"}}],tags:["t-shirt","graphic","unique"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["White","Black","Gray"]}]}]}}};var t=require("../../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[638,452],()=>o(3172));module.exports=r})();