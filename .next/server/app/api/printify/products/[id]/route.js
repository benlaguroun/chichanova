"use strict";(()=>{var e={};e.id=928,e.ids=[928],e.modules={846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3172:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>f,routeModule:()=>u,serverHooks:()=>m,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>g});var o={};t.r(o),t.d(o,{GET:()=>d});var s=t(2706),n=t(8203),i=t(5994),a=t(9187),c=t(9572),p=t(6373);async function d(e,{params:r}){try{let e=r.id;console.log(`API route: Fetching product ${e}`);let t=process.env.PRINTIFY_API_KEY;if(!t){console.error("PRINTIFY_API_KEY environment variable is not set");let r=(0,p.S)(),t=r.find(r=>r.id===e)||r[0];return console.log("Using mock product due to missing API key:",t.title),a.NextResponse.json({error:"PRINTIFY_API_KEY environment variable is not set",product:(0,c.FX)(t),source:"mock"},{status:200})}let o=process.env.PRINTIFY_SHOP_ID;if(!o)try{console.log("No PRINTIFY_SHOP_ID found, attempting to fetch from API..."),o=await (0,c.Cj)(t),console.log(`Using shop ID: ${o}`)}catch(o){console.error("Error getting shop ID:",o);let r=(0,p.S)(),t=r.find(r=>r.id===e)||r[0];return console.log("Using mock product due to shop ID error:",t.title),a.NextResponse.json({error:"Failed to get shop ID from Printify",message:"Using mock data as fallback",product:(0,c.FX)(t),source:"mock"},{status:200})}console.log(`Fetching product ${e} with shop ID: ${o}`);let s=await (0,c.oo)(o,e,t);console.log("Product fetched successfully:",s.title);let n=(0,c.FX)(s);return console.log("Formatted product:",{id:n.id,name:n.name,price:n.price,sizes:n.sizes,colors:n.colors}),a.NextResponse.json({product:n,source:o.startsWith("mock")?"mock":"printify"})}catch(o){console.error("Error in API route:",o);let e=(0,p.S)(),t=e.find(e=>e.id===r.id)||e[0];return a.NextResponse.json({error:"Failed to fetch product from Printify",errorDetails:o instanceof Error?o.message:String(o),product:(0,c.FX)(t),source:"error"},{status:200})}}let u=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/printify/products/[id]/route",pathname:"/api/printify/products/[id]",filename:"route",bundlePath:"app/api/printify/products/[id]/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/products/[id]/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:g,serverHooks:m}=u;function f(){return(0,i.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:g})}}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,452,932],()=>t(3172));module.exports=o})();