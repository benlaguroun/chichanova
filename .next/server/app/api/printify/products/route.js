"use strict";(()=>{var e={};e.id=402,e.ids=[402],e.modules={846:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9119:(e,r,t)=>{t.r(r),t.d(r,{patchFetch:()=>g,routeModule:()=>d,serverHooks:()=>f,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{GET:()=>u});var s=t(2706),n=t(8203),a=t(5994),i=t(9187),p=t(9572),c=t(6373);async function u(){try{let e=process.env.PRINTIFY_API_KEY;if(!e)return console.error("PRINTIFY_API_KEY environment variable is not set"),i.NextResponse.json({error:"PRINTIFY_API_KEY environment variable is not set",products:(0,c.S)().map(e=>(0,p.FX)(e)),source:"mock"},{status:200});let r=process.env.PRINTIFY_SHOP_ID;if(!r)try{console.log("No PRINTIFY_SHOP_ID found, attempting to fetch from API..."),r=await (0,p.Cj)(e),console.log(`Using shop ID: ${r}`)}catch(e){return console.error("Error getting shop ID:",e),i.NextResponse.json({error:"Failed to get shop ID from Printify",message:"Using mock data as fallback",products:(0,c.S)().map(e=>(0,p.FX)(e)),source:"mock"},{status:200})}console.log(`Fetching products with shop ID: ${r}`);let t=await (0,p.d$)(r,e);console.log(`Fetched ${t.length} products from Printify`);let o=t.map(e=>(0,p.FX)(e));return i.NextResponse.json({products:o,source:r.startsWith("mock")?"mock":"printify"})}catch(r){console.error("Error in API route:",r);let e=(0,c.S)().map(e=>(0,p.FX)(e));return i.NextResponse.json({error:"Failed to fetch products from Printify",errorDetails:r instanceof Error?r.message:String(r),products:e,source:"error"},{status:200})}}let d=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/printify/products/route",pathname:"/api/printify/products",filename:"route",bundlePath:"app/api/printify/products/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/products/route.ts",nextConfigOutput:"",userland:o}),{workAsyncStorage:l,workUnitAsyncStorage:m,serverHooks:f}=d;function g(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:m})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,452,932],()=>t(9119));module.exports=o})();