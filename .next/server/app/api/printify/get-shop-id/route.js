(()=>{var e={};e.id=551,e.ids=[551],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},4883:(e,t,o)=>{"use strict";o.r(t),o.d(t,{patchFetch:()=>f,routeModule:()=>d,serverHooks:()=>h,workAsyncStorage:()=>l,workUnitAsyncStorage:()=>u});var r={};o.r(r),o.d(r,{GET:()=>p});var s=o(2706),i=o(8203),a=o(5994),n=o(9187),c=o(9572);async function p(){try{let e=process.env.PRINTIFY_API_KEY;if(!e)return n.NextResponse.json({error:"PRINTIFY_API_KEY environment variable is not set"},{status:401});let t=process.env.PRINTIFY_SHOP_ID;if(!t)try{t=await (0,c.Cj)(e)}catch(e){return console.error("Error getting shop ID:",e),n.NextResponse.json({error:"Failed to get shop ID from Printify",shopId:c.y4,usingMock:!0})}return n.NextResponse.json({shopId:t,usingMock:t===c.y4})}catch(e){return console.error("Error in API route:",e),n.NextResponse.json({error:"Failed to get shop ID",shopId:c.y4,usingMock:!0})}}let d=new s.AppRouteRouteModule({definition:{kind:i.RouteKind.APP_ROUTE,page:"/api/printify/get-shop-id/route",pathname:"/api/printify/get-shop-id",filename:"route",bundlePath:"app/api/printify/get-shop-id/route"},resolvedPagePath:"/Users/mohamedben/Desktop/chichanova/app/api/printify/get-shop-id/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:l,workUnitAsyncStorage:u,serverHooks:h}=d;function f(){return(0,a.patchFetch)({workAsyncStorage:l,workUnitAsyncStorage:u})}},6487:()=>{},8335:()=>{},9572:(e,t,o)=>{"use strict";o.d(t,{Cj:()=>i,FX:()=>c,d$:()=>a,oo:()=>n,y4:()=>s});let r="https://api.printify.com/v1",s="mock-shop-id-12345";async function i(e){try{console.log("Fetching shop ID from Printify API...");let t=await fetch(`${r}/shops.json`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},cache:"no-store"});if(!t.ok){let e=await t.text();throw console.error(`API Error (${t.status}): ${e}`),Error(`Failed to fetch shops: ${t.status} - ${e}`)}let o=await t.json();if(console.log("Printify shops response:",JSON.stringify(o)),!o.data||0===o.data.length)return console.warn("No shops found for this API key. Using mock shop ID for development."),s;return o.data[0].id}catch(e){return console.error("Error fetching shop ID from Printify:",e),console.warn("Using mock shop ID as fallback due to error"),s}}async function a(e,t){try{if(e===s)return console.log("Using mock products data"),p();console.log(`Fetching products from Printify for shop ID: ${e}`);let o=await fetch(`${r}/shops/${e}/products.json`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},cache:"no-store"});if(!o.ok){let e=await o.text();throw console.error(`API Error (${o.status}): ${e}`),Error(`Failed to fetch products: ${o.status} - ${e}`)}let i=await o.json();return console.log(`Received ${i.data?.length||0} products from Printify`),i.data||[]}catch(e){return console.error("Error fetching products from Printify:",e),p()}}async function n(e,t,o){try{if(e===s){console.log("Using mock product data");let e=p();return e.find(e=>e.id===t)||e[0]}console.log(`Fetching product ${t} from Printify for shop ID: ${e}`);let i=await fetch(`${r}/shops/${e}/products/${t}.json`,{headers:{Authorization:`Bearer ${o}`,"Content-Type":"application/json"},cache:"no-store"});if(!i.ok){let e=await i.text();throw console.error(`API Error (${i.status}): ${e}`),Error(`Failed to fetch product: ${i.status} - ${e}`)}let a=await i.json();return console.log(`Received product data from Printify for ID: ${t}`),a}catch(e){return console.error(`Error fetching product ${t} from Printify:`,e),p()[0]}}function c(e){let t=e.images?.map(e=>e.src)||["/placeholder.svg?height=600&width=480"],o=e.variants?.[0]?.price||0,r=e.options?.find(e=>"size"===e.name.toLowerCase()),s=r?.values||[],i=e.options?.find(e=>"color"===e.name.toLowerCase()),a=i?.values||[],n="T-Shirts";return e.tags&&(e.tags.some(e=>e.toLowerCase().includes("hoodie"))?n="Hoodies":e.tags.some(e=>e.toLowerCase().includes("sweatshirt"))?n="Sweatshirts":e.tags.some(e=>e.toLowerCase().includes("accessory")||e.toLowerCase().includes("hat")||e.toLowerCase().includes("cap")||e.toLowerCase().includes("bag"))&&(n="Accessories")),{id:e.id,name:e.title,price:o,description:e.description,image:t,sizes:s,colors:a,category:n,rating:4.5,reviews:Math.floor(116*Math.random())+5,inStock:!0}}function p(){return[{id:"mock-1",title:"Classic Cotton Tee",description:"Our signature classic tee is made from 100% organic cotton for ultimate comfort and durability.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["1"],position:"front",is_default:!0}],variants:[{id:"1",title:"S / Black",price:29.99,sku:"CT-BLK-S",is_enabled:!0,options:{size:"S",color:"Black"}}],tags:["t-shirt","cotton","classic"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL","2XL"]},{name:"Color",type:"dropdown",values:["Black","White","Navy","Gray","Red"]}]},{id:"mock-2",title:"Vintage Hoodie",description:"A comfortable hoodie with a vintage feel, perfect for cooler days.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["2"],position:"front",is_default:!0}],variants:[{id:"2",title:"M / Navy",price:59.99,sku:"VH-NVY-M",is_enabled:!0,options:{size:"M",color:"Navy"}}],tags:["hoodie","vintage","comfortable"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["Navy","Black","Gray"]}]},{id:"mock-3",title:"Statement Sweatshirt",description:"Make a statement with this comfortable and stylish sweatshirt.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["3"],position:"front",is_default:!0}],variants:[{id:"3",title:"L / Gray",price:49.99,sku:"SS-GRY-L",is_enabled:!0,options:{size:"L",color:"Gray"}}],tags:["sweatshirt","statement","stylish"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["Gray","Black","White"]}]},{id:"mock-4",title:"Graphic Tee",description:"Express yourself with our unique graphic tee designs.",images:[{src:"/placeholder.svg?height=600&width=480",variant_ids:["4"],position:"front",is_default:!0}],variants:[{id:"4",title:"M / White",price:34.99,sku:"GT-WHT-M",is_enabled:!0,options:{size:"M",color:"White"}}],tags:["t-shirt","graphic","unique"],options:[{name:"Size",type:"dropdown",values:["S","M","L","XL"]},{name:"Color",type:"dropdown",values:["White","Black","Gray"]}]}]}}};var t=require("../../../../webpack-runtime.js");t.C(e);var o=e=>t(t.s=e),r=t.X(0,[638,452],()=>o(4883));module.exports=r})();